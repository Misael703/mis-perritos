<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Formulario</title>
    <link rel="stylesheet" href="css/estilos.css" />
    <link rel="stylesheet" href="css/fontello.css">
  </head>
  <body>
    <header>
      <div class="contenedor">
        <h1 class="icon-guidedog">Mis Perritos</h1>
        <input type="checkbox" name="" id="menu-bar"/>
        <label class="icon-menu" for="menu-bar"></label>
        <nav class="menu">
          <a href="index.html">Inicio</a>
          <a href="galeria.html">Galeria</a>
          <a href="formulario.html">Formulario</a>
          <a href="">Quienes Somos</a>
        </nav>
      </div>
    </header>
    <!--pagina principal-->
    <main>
      <section id="banner">
        <img src="img/perro_1.jpg" alt="" />
        <div class="contenedor">
          <h2>Mascotas felices en Mis Perritos</h2>
          <p>¿Cuál es la mejor mascota para usted?</p>
          <a href="">Leer Más</a>
        </div>
      </section>

      <section id="bienvenido">
        <h2>Formulario de inscripcion para adoptar</h2>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Maiores
          molestiae, ad quos assumenda saepe rerum a atque fugit dolorum esse
          error. Iste atque maxime voluptate nesciunt recusandae aspernatur
          aliquam reprehenderit.
        </p>
      </section>

      <section id="formulario">

        <form class="form-registro" action="" method="POST">

          <h2 class="form-titulo">Crear una cuenta</h2>

          <div class="contenedor-input">
            <input class="col-sm" type="text" name="txtNombre" id="txtNombre" placeholder="Ingrese Nombre" required min="2" max="10">
            <input class="col-sm" type="text" name="txtApellidos" id="txtApellidos" placeholder="Ingrese Apellidos" required>
            <input class="col-xl" type="email" name="txtEmail" id="txtEmail" placeholder="Ingrese correo electrónico" required>
            <input class="col-sm" type="text" name="txtUsuario" id="txtUsuario" placeholder="Ingrese Usuario" required>
            <input class="col-sm" type="password" name="txtContraseña" id="txtContraseña" placeholder="Ingrese Contraseña" required>
            <input class="col-xl" type="text" name="txtTelefono" id="txtTelefono" placeholder="Ingrese Telefono" required>
            <input class="col-xl" type="text" name="txtRut" id="txtRut" placeholder="Ingrese Rut (Ej: 12345678-9)" required>
            <input class="col-sm" type="date" name="txtFechaNaci" id="txtFechaNaci" placeholder="Ingrese fecha de nacimiento" required>

          <input class="btn-registrar" type="submit" value="Registrar">
          <input class="btn-registrar" type="button" value="Validar Formulario" onclick="validarForm()">
          <input class="btn-registrar" type="button" value="Grabar" onclick="grabar()">
          <input class="btn-registrar" type="button" value="Listar" onclick="listar()">
        </div>
        </form>
      </section>
      <script src="js/usuario.js">
        var arreglo = new Array();
        var ind=0;
        function grabar(){
          var rut = document.getElementById('txtRut').value;
          var nombre = document.getElementById('txtNombre').value;
          var apellidos = document.getElementById('txtApellidos').value;
          var fecha = document.getElementById('txtFechaNaci').value;
          usu = new.usuario();
          usu.setRut(rut);
          usu.setNombre(nombre);
          usu.setApellido(apellidos);
          usu.setFecha(fecha);
          console.log(usu.imprimir());
          arreglo[ind] = JSON.stringify(usu);
          localStorage.setItem('registros',arreglo);
          alert('Datos guardados correctamente');
          ind++;
        }
        
        function listar;
        var tabla = "<table border=1>";
          tabla = tabla +"<tr> <td>Rut</td> <td>Nombre</td> <td>Apellido</td> <td>Fecha</td>"
        var datos = localStorage.getItem('registros');
        var arreglo = new Array();
        console.log(datos);
        datos = datos.split('},{').join('};{'); //reemplazar caracteres
        console.log(datos);
        arreglo = datos.split(';');
        for (let index = 0; index < arreglo.length; index++) {
          var elemento = arreglo[index];
          var usuario = JSON.parse(elemento);
          tabla = tabla +"<tr> <td>"+usuario.rut+"</td> <td>"+usuario.nombre+"</td> <td>"+usuario.apellidos+"</td> <td>"+usuario.fecha+"</td>";  
        }
        tabla= tabla+"</table>";
        document.getElementById('listados').innerHTML=tabla;

      </script>
    </main>
    <div id="listados">

    </div>
    <footer>
      <div class="contenedor">
        <p>Mis Perritos - Desarrollo Web</p>
      </div>
    </footer>
    <script src="js/scripts.js"></script>
  </body>
</html>
